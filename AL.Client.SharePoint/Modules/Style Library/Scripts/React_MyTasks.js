//! require('react')
//! require('SPReact.js', 'SPReact')
//! require('React_ProgressBar.js', 'React_ProgressBar')
var React_MyTasks=function(){var a=React.createClass({displayName:"MyTasksDisplay",getDefaultProps:function(){return{listName:null,listData:[],errorMessage:null}},getInitialState:function(){return{listName:null,listData:[],errorMessage:null}},componentWillReceiveProps:function(a){this.setState({listName:a.listName,listData:a.listData,errorMessage:a.errorMessage})},render:function(){return React.createElement("div",{className:"panel panel-primary"},React.createElement("div",{className:"panel-heading"},React.createElement("h3",{className:"panel-title"},this.state.listName)),React.createElement("div",{className:"panel-body"},this.state.errorMessage?React.createElement("div",{className:"alert alert-danger"},this.state.errorMessage):null,0===this.state.listData.length?React.createElement("div",{className:"alert alert-info"},"No list data"):React.createElement("table",{className:"table"},React.createElement("tr",null,React.createElement("th",null,"Title"),React.createElement("th",null,"Assigned To"),React.createElement("th",null,"Progress")),this.state.listData.map(function(a,b){var c=1===a.PercentComplete?"success":"info",d=1===a.PercentComplete?"Done!":"",e=0;if(a.DueDate&&"success"!==c){var f=864e5,g=new Date(Date.parse(a.DueDate)),h=new Date,e=Math.round((g.getTime()-h.getTime())/f);0>=e?(c="danger",d="due "+Math.abs(e)+" ago!"):7>e&&(c="warning",d="due in "+e+" days!")}return React.createElement("tr",{key:b},React.createElement("td",null,a.Title),React.createElement("td",null,React.createElement(SPReact.UserPresence,{users:a.AssignedToId})),React.createElement("td",null,React.createElement(React_ProgressBar,{percentComplete:100*a.PercentComplete,status:c}),React.createElement("p",null,d)))}))))}}),b=React.createClass({displayName:"MyTasksEdit",getInitialState:function(){return{listName:null,onSaveStatus:null}},getDefaultProps:function(){return{listName:null,onSave:function(){}}},componentWillReceiveProps:function(a){this.setState({listName:a.listName})},render:function(){return React.createElement("div",null,React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-5"},React.createElement("input",{type:"text",className:"form-control",placeholder:"List name...",value:this.state.listName,onChange:this.onListNameChange})),React.createElement("div",{className:"col-md-5"},React.createElement("input",{type:"button",className:"btn btn-primary",value:"Save changes",onClick:this.onSave}))),React.createElement("div",{className:"row"},null===this.state.onSaveStatus?null:React.createElement("div",{className:"col-md-5"},"success"===this.state.onSaveStatus?React.createElement("div",{className:"alert alert-success"},"Save successful"):React.createElement("div",{className:"alert alert-danger"},"Error saving list name"))))},onListNameChange:function(a){var b=a.target.value;this.setState({listName:b})},onSave:function(){this.props.onSave(this.state.listName,this.onSaveCallback.bind(this))},onSaveCallback:function(a){var b=this;this.setState({onSaveStatus:a?"failure":"success"},function(){"success"===b.state.onSaveStatus&&setTimeout(function(){window.location=window.location.href},5e3)})}}),c=React.createClass({displayName:"MyTasks",getInitialState:function(){return{listName:null,listData:[],errorMessage:null,editMode:!1,onSave:function(){}}},render:function(){return React.createElement("div",{className:"container-fluid"},this.state.editMode?React.createElement(b,{listName:this.state.listName,onSave:this.state.onSave}):React.createElement(a,{listName:this.state.listName,listData:this.state.listData,errorMessage:this.state.errorMessage}))}});return"undefined"!=typeof exports&&exports(c),c}();